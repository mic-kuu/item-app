<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Edit item</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/semantic-ui@2.2.13/dist/semantic.min.css">
    <link rel="stylesheet" href="{{ url_for("static", filename="main.css") }}">
    <script
            src="https://code.jquery.com/jquery-3.2.1.min.js"
            integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
            crossorigin="anonymous">
    </script>
    <script src="https://cdn.jsdelivr.net/npm/semantic-ui@2.2.13/dist/semantic.min.js"></script>

</head>
<body>

<div class="ui large main menu">

    <a href="{{ url_for("categoryView") }}" class="header item">
        <img src="{{ url_for("static", filename="logo.png") }}">
    </a>


    <div class="right menu">

        <div class="ui dropdown item">
            <i class="wrench icon"></i>
            Actions
            <div class="menu">

                <a href="{{ url_for("addItem") }}" class="item">Add item</a>

                <div class="item">
                    Add category
                </div>

                <a href="{{ url_for("categoryView") }}" class="item">Main menu</a>

                <div class="item">
                    Info
                </div>
            </div>
        </div>

        <div class="item">


            <div class="content padded">
                <div class="header">Welcome <strong>Magda</strong>!</div>
                <div class="meta">
                    <span class="logout">Not you? <a href="#">Log out</a></span>
                </div>
            </div>

            <div class="ui circular mini spaced image">
                <img src="{{ url_for("static", filename="user.jpg") }}">
            </div>

        </div>


    </div>


</div>


<div class="ui one column doubling stackable centered container">

    <div class="ui clearing segment">
        <div class="ui top attached label">Item definition</div>
        <a class="ui blue right ribbon label">Edit item</a>
        <form action="#" method="post" enctype="multipart/form-data">
            <div class="ui double stackable grid">


                <div class="six wide centered column">

                    <div class="ui blurring dimmable rounded fluid image">
                        <div class="ui dimmer">
                            <div class="content">
                                <div class="center">
                                    <input type="file" autocomplete="off" accept="image/*" name="profile-pic">
                                    <div class="ui inverted button browse">Upload</div>
                                </div>
                            </div>
                        </div>
                        <img src="{{ url_for("static", filename="uploads/"+item.picture) if item.picture != none else url_for("static", filename="empty_img.png") }}">
                    </div>
                </div>

                <div class="ten wide column">


                    <div class="ui form">
                        <div class="field">
                            <label>Category</label>
                            <select name="category-id" class="ui search dropdown">
                                {% for category in categories %}
                                    <option value="{{ category.id }}" {{ "selected" if category.id == category_id else "" }}>{{ category.name }}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="field required">
                            <label>Name</label>
                            <input type="text" required name="name" value="{{ item.name }}">
                        </div>

                        <div class="field required">
                            <label>Price</label>
                            <input type="number" step="0.01" min="0" value="{{ item.price }}" name="price" required>
                        </div>

                        <div class="field">
                            <label>Description</label>
                            <input type="text" name="description" value="{{ item.description }}">

                        </div>

                        <div class="field">
                            <input type="submit" value="Save changes" class="ui positive right floated button">
                        </div>
                    </div>

                </div>

            </div>
        </form>
    </div>

</div>


<script>
    $('.ui.dropdown')
        .dropdown();

    $(".ui.rounded.image").dimmer({
        on: 'hover'
    });

    var $buttonFile = $(".ui.dimmable .ui.dimmer .ui.button"),
        $inputFile = $(".ui.dimmable .ui.dimmer input[type='file']");

    $($buttonFile).click(function () {
        $(this).siblings('input[type="file"]').trigger('click');
    });

    $($inputFile).change(function () {
        readURL(this);
    });

    function readURL(input) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();
            reader.onload = function (e) {
                $('.ui.blurring.image > img').attr('src', e.target.result);
            }
            reader.readAsDataURL(input.files[0]);
        }
    }

</script>


</body>
</html>